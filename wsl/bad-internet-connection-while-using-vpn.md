# Bad internet connection while using VPN

If you're having problems with internet connections inside WSL2 while using a VPN,
try changing your nameserver inside `/etc/resolv.conf`.

First, make sure the `/etc/resolv.conf` file isn't automatically generated by WSL.

1. Create a file `/etc/wsl.conf`

2. Add the following to this file:

   ```bash
   [network]
   generateResolvConf = false
   ```

3. Restart WSL by running `wsl --shutdown` in a cmd window.

Now create a new `/etc/resolv.conf` file.

1. Remove `/etc/resolv.conf` (which is now a symbolic link).

2. Create `/etc/resolv.conf` with your prefered nameserver(s), e.g.:

   ```bash
   nameserver 1.1.1.3
   nameserver 1.0.0.3
   ```
